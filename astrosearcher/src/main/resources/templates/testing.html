<!-- TODO: edit whole document to match new search options....
           -> search by id(name) and search by coords(ra, dec, radius) should be separated in form
           -> fix whole form:
              -> Fix search button
              -> Fix upload button
-->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" data-th-href="@{/css/style.css}">
    <script src="js/showData.js"></script>
    <script src="https://kit.fontawesome.com/254f57ca4f.js" crossorigin="anonymous"></script>
    <title>AstroSearcher</title>
</head>

<body>
<header>
    <nav class="nav-container">
        <ul>
            <li>
                <a href="index.html" th:href="@{http://localhost:8088/index}">AstroSearcher</a>
            </li>
            <li>
                <a href="about.html" th:href="@{http://localhost:8088/about}">About</a>
            </li>
            <li>
                <div class="dropdown">
                    <button class="dropbtn">Language</button>
                    <div class="dropdown-languages">
                        <div class="language-option">
                            <img th:src="@{/images/gb.svg}" src="images/gb.svg" alt="">
                            <a href="#">English</a>
                        </div>
                        <div class="language-option">
                            <img th:src="@{/images/sk.svg}" src="images/sk.svg" alt="">
                            <a href="#">Slovak</a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </nav>
</header>
<!-- ************************************************************* -->
<div id="container-bg">
    <div class="tab">
        <div><button class="datasource" onclick="showData(event, 'data-MAST')">MAST</button></div>
        <div><button class="datasource" onclick="showData(event, 'data-Vizier')">Vizier</button></div>
        <div><button class="datasource" onclick="showData(event, 'data-Simbad')">Simbad</button></div>
    </div>

    <!-- Tab content -->
    <div id="data-MAST" class="tabcontent">
        <table>
            <thead>
            <tr>
                <th:block th:each="column : ${columns}" th:if="${mapper.get(column) != -1 && column.isVisible()}">
                    <th th:text="${column}">
                    </th>
                </th:block>
            </tr>
            </thead>
            <tbody>
            <tr th:each="row : ${rows}">
<!--                <td th:if="${dataUrlFound}">-->
<!--                    <a th:href="@{${row.get(dataUrlIndex).getAsString()}}">-->
<!--                        <i class="fas fa-box-open"></i>-->
<!--                    </a>-->
<!--                </td>-->
<!--                <td th:if="${jpegUrlFound}">-->
<!--                    <a th:href="@{${row.get(jpegUrlIndex).getAsString()}}">-->
<!--                        <i class="far fa-file-image"></i>-->
<!--                    </a>-->
<!--                </td>-->
                <th:block th:each="column : ${columns}" th:if="${mapper.get(column) != -1 && column.isVisible()}">
                    <td th:if="${row.get(mapper.get(column)).isJsonNull()}"></td>
                    <td th:unless="${row.get(mapper.get(column)).isJsonNull()}">
                        <th:block th:if="${row.get(mapper.get(column)).isJsonPrimitive()}">

                            <span th:if="${column.getIconClass() == null}"
                                  th:text="${row.get(mapper.get(column)).getAsJsonPrimitive().isString()}
                                ? ${row.get(mapper.get(column)).getAsString()}
                                : ${row.get(mapper.get(column))}">
                            </span>

                            <span th:unless="${column.getIconClass() == null ||
                                               row.get(mapper.get(column)).getAsString().equals('')}">
                                <a th:href="${row.get(mapper.get(column)).getAsString()}">
                                    <i th:class="${column.getIconClass()}"></i>
                                </a>
                            </span>

                        </th:block>
                        <th:block th:unless="${row.get(mapper.get(column)).isJsonPrimitive()}">
                            <span th:text="${row.get(mapper.get(column))}"></span>
                        </th:block>


                    </td>
                </th:block>

<!--                <th:block th:each="value, iterStat : ${row}">-->
<!--                    <td th:text="${columns.get(iterStat.index).isString()}-->
<!--                        ? ${value.getAsString()}-->
<!--                        : (${value == null}? '' : ${value})"-->
<!--                        th:style="${columns.get(iterStat.index).isHidden()}-->
<!--                            ? 'display:none;'-->
<!--                            : 'display:table-cell;'"></td>-->
<!--                </th:block>-->
            </tr>
            </tbody>
        </table>
    </div>

    <div id="data-Vizier" class="tabcontent">
        <h3>Vizier</h3>
        <p>results</p>
    </div>

    <div id="data-Simbad" class="tabcontent">
        <h3>Simbad</h3>
        <p>results</p>
    </div>
</div>
<!--
<div id="results-table">
-->

<!--
</div>
-->
</body>
</html>