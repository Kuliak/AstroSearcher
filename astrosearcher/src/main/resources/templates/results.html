<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css" data-th-href="@{/css/style.css}">
    <title>AstroSearcher</title>
</head>

<body>

<!--
***************************************************
MAST fragment => query by ID + query by coordinates
***************************************************
-->
<div th:fragment="Mast" id="data-MAST" class="tabcontent">

    <label class="data-MSG" th:unless="${containsMAST}" th:text="${mastDataMSG}"></label>
    <th:block th:if="${containsMAST}">
        <div class="data-table">
            <table>
                <thead>
                <tr>
                    <th:block th:each="field : ${mastFields}">
                        <th th:text="${field}"></th>
                    </th:block>
                </tr>
                </thead>
                <tbody>
                <tr th:each="row : ${mastData}">
                    <th:block th:each="field : ${mastFields}"
                              th:with="isEmpty=${row.get(field.getWorkName()) == null ||
                                                 row.get(field.getWorkName()).isJsonNull() ||
                                                 row.get(field.getWorkName()) == ''}">
                        <td th:if="${isEmpty}"></td>
                        <th:block th:unless="${isEmpty}">
                            <td th:if="${field.isIcon()}">
                                <a th:href="${row.get(field.getWorkName()).getAsString()}">
                                    <i th:class="${field.getIconClass()}"></i>
                                </a>
                            </td>
                            <td th:unless="${field.isIcon()}">
                                <span th:if="${row.get(field.getWorkName()).getAsJsonPrimitive().isString()}"
                                      th:text="${row.get(field.getWorkName()).getAsString()}">
                                </span>
                                <span th:unless="${row.get(field.getWorkName()).getAsJsonPrimitive().isString()}"
                                      th:text="${row.get(field.getWorkName())}">
                                </span>
                            </td>
                        </th:block>
                    </th:block>
                </tr>
                </tbody>
            </table>
        </div>
    </th:block>
</div>

<!--
*****************************************************
Simbad fragment => query by ID + query by coordinates
*****************************************************
-->
<div th:fragment="Simbad" id="data-Simbad" class="tabcontent">
    <th:block th:if="${#strings.equals(simbadType, 'SIMBAD_ID')}">
        <div th:replace="results :: Simbad-id"></div>
    </th:block>
</div>



<div th:fragment="Vizier" id="data-Vizier" class="tabcontent">
    <label class="data-MSG" th:unless="${containsVizier}" th:text="${vizierDataMSG}"></label>
    <th:block th:if="${containsVizier}">
        <div class="data-table"></div>
    </th:block>
</div>

<!--
******************************
Simbad fragment => query by ID
******************************
-->
<div th:fragment="Simbad-id">
    <label class="data-MSG" th:unless="${containsSimbad}" th:text="${simbadDataMSG}"></label>
    <th:block th:if="${containsSimbad}">
        <div class="Simbad-general-info padded-grid">
            <div style="grid-row: 1/2; grid-column: 1/3;">  <h3>General information</h3></div>
            <div style="grid-row: 1/2; grid-column: 4/6;">  <h3>Coordinates (ICRS)</h3> </div>
            <div style="grid-row: 1/2; grid-column: 7/9;">
                <h3 th:text="${'Proper Motion ' + simbadResponse.pmSystem}"></h3>
            </div>

            <div style="grid-row: 2/3; grid-column: 1/2;"><h4>Queried:</h4></div>
            <div style="grid-row: 2/3; grid-column: 2/3;" th:text="${simbadResponse.queried}"></div>
            <div style="grid-row: 2/3; grid-column: 4/5;"><h4>RA:</h4></div>
            <div style="grid-row: 2/3; grid-column: 5/6;" th:text="${simbadResponse.ra}"></div>
            <div style="grid-row: 2/3; grid-column: 7/8;"><h4>RA:</h4></div>
            <div style="grid-row: 2/3; grid-column: 8/9;" th:text="${simbadResponse.pmra}"></div>

            <div style="grid-row: 3/4; grid-column: 1/2;"><h4>Main ID:</h4></div>
            <div style="grid-row: 3/4; grid-column: 2/3;" th:text="${simbadResponse.mainID}"></div>
            <div style="grid-row: 3/4; grid-column: 4/5;"><h4>Dec:</h4></div>
            <div style="grid-row: 3/4; grid-column: 5/6;" th:text="${simbadResponse.dec}"></div>
            <div style="grid-row: 3/4; grid-column: 7/8;"><h4>Dec:</h4></div>
            <div style="grid-row: 3/4; grid-column: 8/9;" th:text="${simbadResponse.pmdec}"></div>

            <div style="grid-row: 4/5; grid-column: 1/2;"><h4>Object type:</h4></div>
            <div style="grid-row: 4/5; grid-column: 2/3;">
                <a th:href="@{${simbadResponse.getObjectTypeUrl()}}"
                   th:text="${simbadResponse.objectType}" target="_blank"></a>
            </div>
            <div style="grid-row: 4/5; grid-column: 4/5;"><h4>Coord. error (Major axis):</h4></div>
            <div style="grid-row: 4/5; grid-column: 5/6;" th:text="${simbadResponse.coordErrorMajA}"></div>
            <div style="grid-row: 4/5; grid-column: 7/8;"><h4>Error (Major axis):</h4></div>
            <div style="grid-row: 4/5; grid-column: 8/9;" th:text="${simbadResponse.pmErrorMajA}"></div>

            <div style="grid-row: 5/6; grid-column: 1/2;"><h4>References:</h4></div>
            <div style="grid-row: 5/6; grid-column: 2/3;">
                <a th:href="@{${simbadResponse.getReferencesUrl()}}"
                   th:text="${simbadResponse.references}" target="_blank"></a>
            </div>
            <div style="grid-row: 5/6; grid-column: 4/5;"><h4>Coord. error (Minor axis):</h4></div>
            <div style="grid-row: 5/6; grid-column: 5/6;" th:text="${simbadResponse.coordErrorMinA}"></div>
            <div style="grid-row: 5/6; grid-column: 7/8;"><h4>Error (Minor axis):</h4></div>
            <div style="grid-row: 5/6; grid-column: 8/9;" th:text="${simbadResponse.pmErrorMinA}"></div>

            <div style="grid-row: 6/7; grid-column: 4/5;"><h4>Coord. error (Angle):</h4></div>
            <div style="grid-row: 6/7; grid-column: 5/6;" th:text="${simbadResponse.coordErrorAng}"></div>
            <div style="grid-row: 6/7; grid-column: 7/8;"><h4>Error (Angle):</h4></div>
            <div style="grid-row: 6/7; grid-column: 8/9;" th:text="${simbadResponse.pmErrorAng}"></div>

            <div style="grid-row: 7/8; grid-column: 1/2;"><h4>Spectral type:</h4></div>
            <div style="grid-row: 7/8; grid-column: 2/3;" th:text="${simbadResponse.spectralType}"></div>
            <div style="grid-row: 7/8; grid-column: 7/8;"><h4>Bibcode:</h4></div>
            <div style="grid-row: 7/8; grid-column: 8/9;">
                <a th:href="@{${simbadResponse.getPMBibcodeUrl()}}"
                   th:text="${simbadResponse.pmBibcode}" target="_blank"></a>
            </div>

            <div style="grid-row: 8/9; grid-column: 1/2;"><h4>Morphological type:</h4></div>
            <div style="grid-row: 8/9; grid-column: 2/3;" th:text="${simbadResponse.morphologicalType}"></div>

        </div>
        <div class="fluxes padded-grid">
            <div style="grid-row: 1/2; grid-column: 1/2;">  <h3>Fluxes</h3></div>
            <div style="grid-row: 1/2; grid-column: 3/5;">  <h3>Parallax</h3></div>

            <div style="grid-row: 2/16; grid-column: 1/2;">
                <table>
                    <thead>
                    <tr>
                        <th>Filter</th>
                        <th>Magnitude</th>
                        <th>Error</th>
                        <th>System</th>
                        <th>Bibcode</th>
                        <th>Variability</th>
                        <th>Multiplicity</th>
                        <th>Quality</th>
                        <th>Unit</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr th:each="flux : ${simbadResponse.fluxes}">
                            <td th:text="${flux.filter}"></td>
                            <td th:text="${flux.magnitude}"></td>
                            <td th:text="${flux.error}"></td>
                            <td th:text="${flux.system}"></td>
                            <td>
                                <a style="color: midnightblue;"
                                   th:href="@{${flux.getBibcodeUrl()}}"
                                   th:text="${flux.bibcode}" target="_blank"></a>
                            </td>
                            <td th:text="${flux.variabilityFlag}"></td>
                            <td th:text="${flux.multiplicityFlag}"></td>
                            <td th:text="${flux.qualityFlag}"></td>
                            <td th:text="${flux.unit}"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div style="grid-row: 2/3; grid-column: 3/4;">Value:</div>
            <div style="grid-row: 2/3; grid-column: 4/5;" th:text="${simbadResponse.parallaxValue}"></div>

            <div style="grid-row: 3/4; grid-column: 3/4;">Error:</div>
            <div style="grid-row: 3/4; grid-column: 4/5;" th:text="${simbadResponse.parallaxError}"></div>

            <div style="grid-row: 4/5; grid-column: 3/4;"></div>

            <div style="grid-row: 5/6; grid-column: 3/4;">Observatory code:</div>
            <div style="grid-row: 5/6; grid-column: 4/5;" th:text="${simbadResponse.parallaxObsCode}"></div>

            <div style="grid-row: 6/7; grid-column: 3/4;">Bibcode:</div>
            <div style="grid-row: 6/7; grid-column: 4/5;">
                <a th:href="@{${simbadResponse.getParallaxBibcodeUrl()}}"
                   th:text="${simbadResponse.parallaxBibcode}" target="_blank"></a>
            </div>


        </div>

        <div class="data-table">
            <table>
                <thead>
                <tr>
                    <th:block th:each="field : ${simbadResponse.unassignedFields}">
                        <th th:text="${field.label}"></th>
                    </th:block>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th:block th:each="column : ${simbadResponse.unassignedData}">
                        <td th:text="${column}"></td>
                    </th:block>
                </tr>
                </tbody>
            </table>
        </div>
    </th:block>
</div>


</body>
</html>